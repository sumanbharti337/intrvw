<%= form_with(model: document, local: true) do |form| %>
  <% if document.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(document.errors.count, "error") %> prohibited this document from being saved:</h2>

      <ul>
        <% document.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= form.label :doc_type %>
    <%#= form.text_field :doc_type %>
    <%= form.select(:doc_type, Document.doc_types.keys, {}, {:class=> "form-control"}) %>

  </div>

  <div class="field">
    <%= form.label :name %>
    <%= form.text_field :name, :class=> "form-control" %>
  </div>

  <div class="field">
    <%= form.label :images, "Attachments" %>
    <p>
    <ul>
      <% @document.images.each do |file| %>
        <% if (file.content_type == "image/jpeg" || file.content_type == "image/jpeg" || file.content_type == "image/png")%>
          <li>
            <%= image_tag file, :style=>"width:100px" %>
          </li>
        <% else %>
          <li>
            <%= link_to "#{file.filename}", file %>
          </li>
        <% end %>
      <% end %>
    </ul>
    </p>
    <%= form.file_field :images, multiple: true, :class=> "form-control" %><br>
  </div>

  <div class="field">
    <%= form.label :patient_id %>
    <%#= form.text_field :patient_id %>
    <%= form.select(:patient_id, Patient.all.collect {|a| [a.name, a.id]}, {}, {:class=> "form-control"}) -%>
  </div>

  <div class="actions">
    <%= form.submit %>
  </div>
<% end %>
